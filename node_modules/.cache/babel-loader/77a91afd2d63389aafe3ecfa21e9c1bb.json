{"ast":null,"code":"import _defineProperty from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Navigate}from'react-router-dom';import styles from\"./signup.module.css\";import sha256 from\"sha256\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){var isLogined=_ref.isLogined,getUserData=_ref.getUserData,setIsLogined=_ref.setIsLogined;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRedirect=_useState2[0],setIsRedirect=_useState2[1];var _useState3=useState({id:\"\",password:\"\",nickname:\"\"}),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];function onChange(event){setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));}function clickSignUpClick(event){event.preventDefault();if(!userData.id&&!userData.password&&!userData.writer){alert(\"빈 칸이 들어가면 안됩니다. 다시 입력하세요\");}else{fetch(\"/signup\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:userData.id,password:sha256(userData.password),nickname:userData.nickname})}).then(function(res){if(res.status===200){alert(\"회원가입이 완료됐습니다.\");fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:userData===null||userData===void 0?void 0:userData.id,password:sha256(userData===null||userData===void 0?void 0:userData.password)})}).then(function(response){getUserData();setIsLogined(true);});setIsRedirect(true);}else if(res.status===401){alert(\"회원가입이 되지 않았습니다.\");}});}}return/*#__PURE__*/_jsxs(\"div\",{className:styles.signup,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.signup_id,name:\"id\",placeholder:\"id\",onChange:onChange,type:\"text\"}),/*#__PURE__*/_jsx(\"input\",{className:styles.signup_nickname,name:\"nickname\",placeholder:\"nickname\",onChange:onChange,type:\"text\"}),/*#__PURE__*/_jsx(\"input\",{className:styles.signup_password,name:\"password\",placeholder:\"password\",onChange:onChange,type:\"password\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.signup_submit,onClick:clickSignUpClick,children:\"SignUp\"}),isRedirect&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"})]});}export default Signup;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/src/Signup.js"],"names":["useState","Navigate","styles","sha256","Signup","isLogined","getUserData","setIsLogined","isRedirect","setIsRedirect","id","password","nickname","userData","setUserData","onChange","event","target","name","value","clickSignUpClick","preventDefault","writer","alert","fetch","method","headers","body","JSON","stringify","then","res","status","response","signup","signup_id","signup_nickname","signup_password","signup_submit"],"mappings":"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","sourcesContent":["import {useState} from \"react\";\r\nimport { Navigate } from 'react-router-dom'\r\nimport styles from \"./signup.module.css\"\r\nimport sha256 from \"sha256\";\r\n\r\nfunction Signup({isLogined,getUserData,setIsLogined}) {\r\n    const [isRedirect,setIsRedirect] = useState(false);\r\n    const [userData,setUserData] = useState({\r\n        id:\"\",\r\n        password:\"\",\r\n        nickname:\"\",\r\n    });\r\n\r\n    function onChange(event){\r\n        setUserData({\r\n            ...userData,\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    function clickSignUpClick(event){\r\n        event.preventDefault();\r\n        if(!userData.id && !userData.password && !userData.writer){\r\n            alert(\"빈 칸이 들어가면 안됩니다. 다시 입력하세요\");\r\n        }else{\r\n        fetch(\"/signup\",{\r\n            method:\"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n            body:JSON.stringify({\r\n                id:userData.id,\r\n                password:sha256(userData.password),\r\n                nickname:userData.nickname\r\n            })\r\n        }).then(res => {\r\n            if(res.status === 200){\r\n                alert(\"회원가입이 완료됐습니다.\")\r\n                fetch(`/login`,{\r\n                    method:\"POST\",\r\n                    headers:{\r\n                    \"Content-Type\":\"application/json\",\r\n                    },\r\n                    body:JSON.stringify({\r\n                    id:userData?.id,\r\n                    password:sha256(userData?.password)\r\n                    }),\r\n                }).then((response) =>{\r\n                    getUserData();\r\n                    setIsLogined(true);\r\n                });\r\n                setIsRedirect(true);\r\n            }else if(res.status === 401){\r\n                alert(\"회원가입이 되지 않았습니다.\")\r\n            }\r\n        })\r\n    }\r\n    }\r\n    return (\r\n      <div className={styles.signup}>\r\n            <input className={styles.signup_id} name=\"id\" placeholder=\"id\" onChange={onChange} type=\"text\" />\r\n            <input className={styles.signup_nickname}name=\"nickname\" placeholder=\"nickname\" onChange={onChange} type=\"text\" />\r\n            <input className={styles.signup_password}name=\"password\" placeholder=\"password\" onChange={onChange} type=\"password\" />\r\n            <button className={styles.signup_submit}onClick={clickSignUpClick}>SignUp</button>\r\n            {isRedirect&&<Navigate to=\"/\"/>}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default Signup;\r\n  "]},"metadata":{},"sourceType":"module"}