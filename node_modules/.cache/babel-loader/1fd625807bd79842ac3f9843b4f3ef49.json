{"ast":null,"code":"import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{Navigate}from'react-router-dom';import{useParams}from\"react-router-dom\";import styles from\"./Detail.module.css\";import Comments from\"./Comments\";import LoadingIcons from'react-loading-icons';import{CKEditor}from'@ckeditor/ckeditor5-react';import Editor from'./ckeditor5/build/ckeditor';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Detail(_ref){var _forumData$forums_cre;var isLogined=_ref.isLogined,isLoading=_ref.isLoading,setIsLoading=_ref.setIsLoading,getUserData=_ref.getUserData;var _useParams=useParams(),no=_useParams.no;var date;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),forumData=_useState2[0],setForumData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRedirectHome=_useState4[0],setIsRedirectHome=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRedirectLogin=_useState6[0],setIsRedirectLogin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isUpdate=_useState8[0],setIsUpdate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),comments=_useState10[0],setComments=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),maxseq=_useState12[0],setMaxSeq=_useState12[1];var comment_input=useRef(null);var contents_input=useRef(null);var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),aaa=_useState14[0],setaaa=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),title=_useState16[0],setTitle=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),contents=_useState18[0],setContents=_useState18[1];useEffect(function(){setIsLoading(true);getForumData();getUserData();},[]);function getForumData(){fetch(\"/forums/\".concat(no)).then(function(res){return res.json();}).then(function(data){setForumData(data[0]);setTitle(data[0].title);setContents(data[0].contents);setIsLoading(false);}).then();}function deleteForum(){if(window.confirm(\"게시물을 삭제하겠습니까?\")){fetch(\"/forums/\".concat(no),{method:\"DELETE\"}).then(function(res){if(res.status===401){alert(\"로그인이 필요합니다\");setIsRedirectLogin(true);}if(res.status===403){alert(\"수정한 권한이 없습니다\");getForumData();}if(res.status===200){alert(\"삭제되었습니다.\");setIsRedirectHome(true);}});}}function updateForum(){if(window.confirm(\"내용을 변경하겠습니까?\")){fetch(\"/forums/\".concat(no),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({title:title,// contents:contents_input.current.value\ncontents:contents})}).then(function(res){if(res.status===401){alert(\"로그인이 필요합니다\");setIsRedirectLogin(true);}if(res.status===403){alert(\"수정한 권한이 없습니다\");getForumData();}});}setIsUpdate(false);}function getMaxSeq(seq){setMaxSeq(seq);}function createComments(){fetch(\"/comments/\".concat(no),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({contents:comment_input.current.value,seq:maxseq+1,lvl:0})}).then(function(res){setaaa(function(prev){return!prev;});if(res.status===401){alert(\"로그인이 필요합니다\");setIsRedirectLogin(true);}});}return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsxs(\"div\",{className:styles.detail,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.title,style:isUpdate?{border:\"1px solid\"}:{},readOnly:!isUpdate,value:title,onChange:function onChange(e){setTitle(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:styles.userData,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.userData_nickname,children:forumData.nickname}),\"\\xA0\\xA0\\xA0\\xA0 \",/*#__PURE__*/_jsx(\"div\",{className:styles.userData_createAt,children:(_forumData$forums_cre=forumData.forums_create_at)===null||_forumData$forums_cre===void 0?void 0:_forumData$forums_cre.replace(/T|Z/g,' ').slice(0,19)})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\",marginBottom:\"10px\",top:\"10px\",backgroundColor:\"red\",color:\"#ddd\",borderBottom:\"1px solid\"}}),/*#__PURE__*/_jsx(\"div\",{className:isUpdate?\"\":styles.hidden,children:/*#__PURE__*/_jsx(CKEditor,{editor:Editor,data:contents,onChange:function onChange(event,editor){var data=editor.getData();setContents(data);}})}),/*#__PURE__*/_jsx(\"div\",{className:isUpdate?styles.hidden:\"\",dangerouslySetInnerHTML:{__html:\"\".concat(contents)}}),/*#__PURE__*/_jsxs(\"div\",{className:styles.forum_process_menu,children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsUpdate(function(prev){return!prev;});},className:[!isLogined&&styles.hidden,isUpdate?styles.hidden:styles.forum_update].join(\" \"),children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{onClick:updateForum,className:[!isLogined&&styles.hidden,isUpdate?styles.forum_update:styles.hidden].join(\" \"),children:\"\\uC801\\uC6A9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteForum,className:[!isLogined&&styles.hidden,styles.forum_delete].join(\" \"),children:\"\\uC81C\\uAC70\"})]}),/*#__PURE__*/_jsx(Comments,{no:no,setIsRedirectLogin:setIsRedirectLogin,getMaxSeq:getMaxSeq,aaa:aaa,isLogined:isLogined}),/*#__PURE__*/_jsxs(\"div\",{className:isLogined?styles.comments_create:styles.hidden,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:comment_input,className:styles.comment_create_input,placeholder:\"\\uB313\\uAE00\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694. \\r\\nshift+enter\\uB85C \\uC904\\uBC14\\uAFC8 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){createComments();},className:styles.comment_create_button,children:\"\\uB4F1\\uB85D\"})]}),isRedirectHome&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"}),isRedirectLogin&&/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})]})});}export default Detail;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/src/Detail.js"],"names":["useEffect","useRef","useState","Navigate","useParams","styles","Comments","LoadingIcons","CKEditor","Editor","Detail","isLogined","isLoading","setIsLoading","getUserData","no","date","forumData","setForumData","isRedirectHome","setIsRedirectHome","isRedirectLogin","setIsRedirectLogin","isUpdate","setIsUpdate","comments","setComments","maxseq","setMaxSeq","comment_input","contents_input","aaa","setaaa","title","setTitle","contents","setContents","getForumData","fetch","then","res","json","data","deleteForum","window","confirm","method","status","alert","updateForum","headers","body","JSON","stringify","getMaxSeq","seq","createComments","current","value","lvl","prev","detail","border","e","target","userData","userData_nickname","nickname","userData_createAt","forums_create_at","replace","slice","position","marginBottom","top","backgroundColor","color","borderBottom","hidden","event","editor","getData","__html","forum_process_menu","forum_update","join","forum_delete","comments_create","comment_create_input","comment_create_button"],"mappings":"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","sourcesContent":["import { useEffect,useRef,useState } from \"react\";\r\nimport { Navigate } from 'react-router-dom'\r\nimport {useParams} from \"react-router-dom\"\r\nimport styles from \"./Detail.module.css\"\r\nimport Comments from \"./Comments\"\r\nimport LoadingIcons from 'react-loading-icons'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport Editor from './ckeditor5/build/ckeditor';\r\n\r\n\r\nfunction Detail({isLogined, isLoading, setIsLoading,getUserData}) {\r\n    let {no} = useParams();\r\n    let date;\r\n\r\n\r\n    const [forumData,setForumData] = useState([]);\r\n    const [isRedirectHome,setIsRedirectHome] = useState(false);\r\n    const [isRedirectLogin,setIsRedirectLogin] = useState(false);\r\n    const [isUpdate,setIsUpdate] = useState(false);\r\n    const [comments,setComments] = useState([]);\r\n    const [maxseq,setMaxSeq] = useState(0);\r\n    const comment_input = useRef(null);\r\n    const contents_input = useRef(null);\r\n    const [aaa,setaaa]=useState(false);\r\n    const [title,setTitle] = useState(\"\");\r\n    const [contents,setContents] = useState(\"\");\r\n\r\n\r\n    useEffect(()=> {\r\n        setIsLoading(true);\r\n        getForumData();\r\n        getUserData();\r\n    }, []);\r\n\r\n    function getForumData(){\r\n        fetch(`/forums/${no}`).then(res => res.json()).then(data=> {\r\n            setForumData(data[0]);\r\n            setTitle(data[0].title);\r\n            setContents(data[0].contents);\r\n            setIsLoading(false)\r\n            \r\n        }).then();\r\n    }\r\n\r\n    function deleteForum(){\r\n        if(window.confirm(\"게시물을 삭제하겠습니까?\")){\r\n            fetch(`/forums/${no}`,{method:\"DELETE\"}).then((res) => { \r\n                if(res.status === 401){\r\n                    alert(\"로그인이 필요합니다\")\r\n                    setIsRedirectLogin(true);\r\n                }\r\n                if(res.status === 403){\r\n                    alert(\"수정한 권한이 없습니다\");\r\n                    getForumData();\r\n                }\r\n                if(res.status === 200){\r\n                    alert(\"삭제되었습니다.\")\r\n                    setIsRedirectHome(true);\r\n                }\r\n                \r\n            });\r\n\r\n        }\r\n    }\r\n    \r\n    function updateForum(){\r\n        if(window.confirm(\"내용을 변경하겠습니까?\") ){\r\n            fetch(`/forums/${no}`,{\r\n                method:\"PATCH\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                  },\r\n                body:JSON.stringify({\r\n                    title:title,\r\n                    // contents:contents_input.current.value\r\n                    contents:contents\r\n                })    \r\n            }).then((res) =>{\r\n                if(res.status === 401){\r\n                    alert(\"로그인이 필요합니다\")\r\n                    setIsRedirectLogin(true);\r\n                }\r\n                if(res.status === 403){\r\n                    alert(\"수정한 권한이 없습니다\");\r\n                    getForumData();\r\n                }\r\n            });\r\n        }\r\n        setIsUpdate(false);\r\n    }\r\n    function getMaxSeq(seq){\r\n        setMaxSeq(seq)\r\n    }\r\n    function createComments(){\r\n        fetch(`/comments/${no}`,{\r\n            method:\"POST\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n            body:JSON.stringify({\r\n                contents:comment_input.current.value,\r\n                seq:maxseq+1,\r\n                lvl:0\r\n            })\r\n        }).then(res=>{\r\n            setaaa(prev=>!prev);\r\n            if(res.status === 401){\r\n                alert(\"로그인이 필요합니다\")\r\n                setIsRedirectLogin(true);\r\n            }\r\n        })\r\n    }\r\n\r\n    return (<>\r\n    {isLoading?<></>:<div className={styles.detail}>\r\n            <input className={styles.title} style={isUpdate?{border:\"1px solid\"}:{}} readOnly={!isUpdate} value={title} onChange={(e)=>{\r\n                setTitle(e.target.value)\r\n            }}/>\r\n            <div className={styles.userData}>\r\n            <div className={styles.userData_nickname}>{forumData.nickname}</div>&nbsp;&nbsp;&nbsp;&nbsp; <div className={styles.userData_createAt}>{forumData.forums_create_at?.replace(/T|Z/g,' ').slice(0,19)}</div></div>\r\n            <div style={{position:\"relative\",marginBottom:\"10px\",top:\"10px\",backgroundColor:\"red\",color:\"#ddd\",borderBottom:\"1px solid\"}}/>\r\n            <div className={isUpdate?\"\":styles.hidden}>\r\n            <CKEditor\r\n                    editor={ Editor }\r\n                    data={contents}\r\n                    onChange={ ( event, editor ) => {\r\n                        const data = editor.getData();\r\n                        setContents(data);\r\n                    }}\r\n                />\r\n            </div>\r\n            <div className={isUpdate?styles.hidden:\"\"} dangerouslySetInnerHTML={{__html:`${contents}`}} />\r\n            <div className={styles.forum_process_menu}>\r\n                <button onClick={()=>setIsUpdate(prev=> !prev)} className={[!isLogined&&styles.hidden, isUpdate?styles.hidden:styles.forum_update].join(\" \")}>수정</button>\r\n                <button onClick={updateForum} className={[!isLogined&&styles.hidden,isUpdate?styles.forum_update:styles.hidden].join(\" \")}>적용</button>\r\n                <button onClick={deleteForum} className={[!isLogined&&styles.hidden, styles.forum_delete].join(\" \")}>제거</button>\r\n            </div>\r\n            <Comments no={no} setIsRedirectLogin={setIsRedirectLogin} getMaxSeq={getMaxSeq} aaa={aaa} isLogined={isLogined} />\r\n            <div className={isLogined?styles.comments_create:styles.hidden}>\r\n                <textarea ref={comment_input} className={styles.comment_create_input} placeholder=\"댓글을 입력하세요. &#13;&#10;shift+enter로 줄바꿈 가능합니다.\"></textarea> \r\n                <button onClick={()=>{\r\n                    createComments()\r\n                }} className={styles.comment_create_button}>등록</button>\r\n            </div>\r\n            {isRedirectHome&&<Navigate to=\"/\"/>}\r\n            {isRedirectLogin&&<Navigate to=\"/login\"/>}\r\n        </div>}\r\n    \r\n    </>\r\n    );\r\n}\r\n  \r\nexport default Detail;\r\n  "]},"metadata":{},"sourceType":"module"}