{"ast":null,"code":"import _defineProperty from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,Navigate}from\"react-router-dom\";import{useState}from\"react\";import styles from\"./Login.module.css\";import sha256 from\"sha256\";import googleLoginBtn from\"./asset/googleLogin.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var setIsLogined=_ref.setIsLogined,getUserData=_ref.getUserData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRedirect=_useState2[0],setIsRedirect=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var el=useRef();useState(function(){getUserData();addEventToolTip(el);},[]);function onClickSubmit(event){event.preventDefault();fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:userData===null||userData===void 0?void 0:userData.id,password:sha256(userData===null||userData===void 0?void 0:userData.password)})}).then(function(response){if(response.status===401){alert(\"아이디 또는 비밀번호가 틀렸습니다.\");}else{getUserData();setIsLogined(true);}});setIsRedirect(true);}function onChangeUserData(event){setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));}function addEventToolTip(targetRef,msg){window.addEventListener(\"mouseover\",function(e){if(targetRef.current.contains(e.target))console.log(\"굿\");});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.form,children:[\"\\uB85C\\uADF8\\uC778\",/*#__PURE__*/_jsx(\"input\",{className:styles.id,name:\"id\",type:\"text\",onChange:onChangeUserData}),/*#__PURE__*/_jsx(\"input\",{className:styles.password,name:\"password\",type:\"password\",onChange:onChangeUserData}),/*#__PURE__*/_jsx(\"input\",{className:styles.submit,type:\"button\",onClick:onClickSubmit,value:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\\uC744 \\uC544\\uC9C1 \\uC548\\uD558\\uC168\\uB098\\uC694?\"}),/*#__PURE__*/_jsx(\"a\",{ref:el,href:\"/auth/google\",onClick:function onClick(){return getUserData();},children:/*#__PURE__*/_jsx(\"div\",{children:\"\\uAD6C\\uAE00\\uB85C\\uADF8\\uC778\"})})]}),isRedirect&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"})]});}export default Login;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/src/Login.js"],"names":["Link","Navigate","useState","styles","sha256","googleLoginBtn","Login","setIsLogined","getUserData","isRedirect","setIsRedirect","userData","setUserData","el","useRef","addEventToolTip","onClickSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","id","password","then","response","status","alert","onChangeUserData","target","name","value","targetRef","msg","window","addEventListener","e","current","contains","console","log","form","submit"],"mappings":"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","sourcesContent":["import {Link,Navigate} from \"react-router-dom\"\r\nimport {useState} from \"react\"\r\nimport styles from \"./Login.module.css\";\r\nimport sha256 from \"sha256\";\r\nimport googleLoginBtn from \"./asset/googleLogin.png\"\r\n\r\n\r\nfunction Login({setIsLogined,getUserData}) {\r\n  const [isRedirect,setIsRedirect] = useState(false);\r\n  const [userData,setUserData] = useState([]);\r\n  const el = useRef();\r\n\r\n  useState(()=>{\r\n    getUserData();\r\n    addEventToolTip(el);\r\n  },[])\r\n\r\n  function onClickSubmit(event){\r\n    event.preventDefault();\r\n    fetch(`/login`,{\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-Type\":\"application/json\",\r\n      },\r\n      body:JSON.stringify({\r\n        id:userData?.id,\r\n        password:sha256(userData?.password)\r\n      }),\r\n    }).then((response) =>{\r\n      if(response.status === 401){\r\n        alert(\"아이디 또는 비밀번호가 틀렸습니다.\");\r\n      }\r\n      else{\r\n        getUserData();\r\n        setIsLogined(true);\r\n      }\r\n    });\r\n    setIsRedirect(true);\r\n  }\r\n  function onChangeUserData(event){\r\n    setUserData({\r\n        ...userData,\r\n        [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  function addEventToolTip(targetRef,msg){\r\n    window.addEventListener(\"mouseover\",(e)=>{\r\n      if(targetRef.current.contains(e.target))console.log(\"굿\");\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className={styles.form}>\r\n        로그인\r\n        <input className={styles.id} name=\"id\" type=\"text\" onChange={onChangeUserData}/>\r\n        <input className={styles.password} name=\"password\" type=\"password\" onChange={onChangeUserData}/>\r\n        <input className={styles.submit} type=\"button\" onClick={onClickSubmit} value=\"로그인\" />\r\n        <Link to=\"/signup\">회원가입을 아직 안하셨나요?</Link>\r\n        <a ref={el} href=\"/auth/google\" onClick={()=>getUserData()}>\r\n          <div>구글로그인</div>\r\n          </a>\r\n      </div>\r\n        \r\n        {isRedirect&&<Navigate to=\"/\"/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}