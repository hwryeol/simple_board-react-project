{"ast":null,"code":"import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import styles from\"./Home.module.css\";import{VscChevronLeft,VscChevronRight}from\"react-icons/vsc\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Home(_ref){var isLogined=_ref.isLogined,isLoding=_ref.isLoding,setIsLoading=_ref.setIsLoading,getUserData=_ref.getUserData;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),forumList=_useState2[0],setForumList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),forumsCount=_useState6[0],setForumsCount=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPageList=_useState10[0],setCurrentPageList=_useState10[1];var max_page=Math.ceil(forumsCount/10);function getForumList(){setIsLoading(true);fetch(\"/forums/pages/\".concat(currentPage),{method:\"get\",headers:{withCredentials:true}}).then(function(res){res.json().then(function(list){setForumsCount(list[0][0].cnt);setForumList(list[1]);setIsLoading(false);});});}useEffect(function(){getForumList();getUserData();},[currentPage]);var pagenation=function pagenation(){var result=[];var start=currentPageList-1;var _loop=function _loop(i){result.push(/*#__PURE__*/_jsx(\"div\",{className:i===currentPage?styles.selectPage:\"\",onClick:function onClick(){setCurrentPage(i);},children:i}));};for(var i=10*start+1;i<=max_page&&i<=10*(start+1);i++){_loop(i);}return result;};var upPageList=function upPageList(){setCurrentPageList(function(prev){return prev+1;});};var downPageList=function downPageList(){if(currentPageList>1){setCurrentPageList(function(prev){return prev-1;});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.boards,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.boards_title,children:\"\\uCD1D \\uAC8C\\uC2DC\\uBB3C \".concat(forumsCount,\"\\uAC74 \\uD604\\uC7AC\\uD398\\uC774\\uC9C0 \").concat(currentPage,\"/\").concat(max_page)}),/*#__PURE__*/_jsxs(\"table\",{className:styles.boards_content_List,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.boards_content_List_header,children:/*#__PURE__*/_jsxs(\"tr\",{className:styles.boards_content_List_header_tr,children:[/*#__PURE__*/_jsx(\"th\",{className:styles.boards_content_List_header_no,children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{className:styles.boards_content_List_header_title,children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"th\",{className:styles.boards_content_List_header_writer,children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{className:styles.boards_content_List_header_createAt,children:\"\\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"th\",{className:styles.boards_content_List_header_viewCount,children:\"\\uC870\\uD68C\\uC218\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:styles.boards_content_List_body,children:forumList.map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{className:styles.boards_content_List_body_tr,children:[/*#__PURE__*/_jsx(\"td\",{className:styles.boards_content_List_body_tr_no,children:data['no']}),/*#__PURE__*/_jsx(\"td\",{className:styles.boards_content_List_body_tr_title,children:/*#__PURE__*/_jsx(Link,{className:styles.boards_content_List_body_tr_title_link,to:\"/forums/\".concat(data['no']),children:data['title']})}),/*#__PURE__*/_jsx(\"td\",{className:styles.boards_content_List_body_tr_writer,children:data['nickname']}),/*#__PURE__*/_jsx(\"td\",{className:styles.boards_content_List_body_tr_createAt,children:data['create_at'].slice(0,10)}),/*#__PURE__*/_jsx(\"td\",{className:styles.boards_content_List_body_tr_viewCount,children:data['view_count']})]},\"forum_\".concat(data['no']));})})]}),/*#__PURE__*/_jsx(Link,{className:isLogined?\"\":styles.hidden,to:\"./postcreate\",children:\"\\uC0DD\\uC131\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[currentPageList>1?/*#__PURE__*/_jsx(VscChevronLeft,{onClick:downPageList,className:styles.left_icon}):null,pagenation(),max_page!=0&&(currentPage>max_page||max_page>10)?/*#__PURE__*/_jsx(VscChevronRight,{onClick:upPageList,className:styles.right_icon}):null]})]})});}export default Home;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/src/Home.js"],"names":["useEffect","useState","Link","styles","VscChevronLeft","VscChevronRight","Home","isLogined","isLoding","setIsLoading","getUserData","forumList","setForumList","userData","setUserData","forumsCount","setForumsCount","currentPage","setCurrentPage","currentPageList","setCurrentPageList","max_page","Math","ceil","getForumList","fetch","method","headers","withCredentials","then","res","json","list","cnt","pagenation","result","start","i","push","selectPage","upPageList","prev","downPageList","boards","boards_title","boards_content_List","boards_content_List_header","boards_content_List_header_tr","boards_content_List_header_no","boards_content_List_header_title","boards_content_List_header_writer","boards_content_List_header_createAt","boards_content_List_header_viewCount","boards_content_List_body","map","data","boards_content_List_body_tr","boards_content_List_body_tr_no","boards_content_List_body_tr_title","boards_content_List_body_tr_title_link","boards_content_List_body_tr_writer","boards_content_List_body_tr_createAt","slice","boards_content_List_body_tr_viewCount","hidden","container","left_icon","right_icon"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport styles from \"./Home.module.css\";\r\nimport {VscChevronLeft,VscChevronRight } from \"react-icons/vsc\";\r\n\r\n\r\nfunction Home({isLogined, isLoding, setIsLoading,getUserData}) {\r\n  const [forumList,setForumList] = useState([]);\r\n  const [userData,setUserData] = useState([]);\r\n  const [forumsCount,setForumsCount] = useState(0);\r\n  const [currentPage,setCurrentPage] = useState(1);\r\n  const [currentPageList,setCurrentPageList] = useState(1);\r\n\r\n  const max_page = Math.ceil(forumsCount/10);\r\n  \r\n\r\n  function getForumList(){\r\n    setIsLoading(true);\r\n    fetch(`/forums/pages/${currentPage}`,{\r\n      method:\"get\",\r\n      headers:{\r\n        withCredentials:true\r\n      }\r\n      \r\n    }).then( res => {\r\n      res.json().then(list => {\r\n        setForumsCount(list[0][0].cnt);\r\n        setForumList(list[1]);\r\n        setIsLoading(false);\r\n      })\r\n    }\r\n      );\r\n      \r\n  }\r\n  useEffect(()=>{\r\n    getForumList();\r\n    getUserData();\r\n  },[currentPage]);\r\n\r\n  const pagenation = () => {\r\n    const result = [];\r\n    const start = currentPageList-1;\r\n    for (let i=(10*start)+1; i<=max_page && i<=10*(start+1); i++){\r\n      result.push(<div className={i===currentPage?styles.selectPage:\"\"} onClick={()=>{\r\n        setCurrentPage(i);\r\n      }}>{i}</div>)\r\n    }\r\n    return result;\r\n  }\r\n\r\n  const upPageList = () =>{\r\n      setCurrentPageList(prev=>prev+1);\r\n  }\r\n  const downPageList = () =>{\r\n    if(currentPageList>1){\r\n      setCurrentPageList(prev=>prev-1);\r\n    }\r\n  }\r\n  \r\n    return (\r\n      <>\r\n     \r\n      <div className={styles.boards}>\r\n        <div className={styles.boards_title}>{`총 게시물 ${forumsCount}건 현재페이지 ${currentPage}/${max_page}`}</div>\r\n        <table className={styles.boards_content_List}>\r\n            <thead className={styles.boards_content_List_header}>\r\n              <tr className={styles.boards_content_List_header_tr}>\r\n                <th className={styles.boards_content_List_header_no}>번호</th>\r\n                <th className={styles.boards_content_List_header_title}>제목</th>\r\n                <th className={styles.boards_content_List_header_writer}>작성자</th>\r\n                <th className={styles.boards_content_List_header_createAt}>날짜</th>\r\n                <th className={styles.boards_content_List_header_viewCount}>조회수</th>\r\n              </tr>\r\n            </thead> \r\n            <tbody className={styles.boards_content_List_body}>\r\n            {\r\n            forumList.map(data=>{\r\n              return (\r\n              <tr className={styles.boards_content_List_body_tr} key={`forum_${data['no']}`}>\r\n                  <td className={styles.boards_content_List_body_tr_no}>{data['no']}</td>\r\n                  <td className={styles.boards_content_List_body_tr_title}>\r\n                  <Link className={styles.boards_content_List_body_tr_title_link} to={`/forums/${data['no']}`}>\r\n                    {data['title']}\r\n                  </Link>\r\n                  </td>\r\n                  <td className={styles.boards_content_List_body_tr_writer}>{data['nickname']}</td>\r\n                  <td className={styles.boards_content_List_body_tr_createAt}>{data['create_at'].slice(0,10)}</td>\r\n                  <td className={styles.boards_content_List_body_tr_viewCount}>{data['view_count']}</td>     \r\n              </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n          </table>\r\n          <Link className={isLogined?\"\":styles.hidden} to=\"./postcreate\">생성</Link>\r\n          <div className={styles.container}>\r\n            {currentPageList>1?<VscChevronLeft onClick={downPageList} className={styles.left_icon}/>:null}\r\n            {pagenation()}\r\n            {max_page!=0&&(currentPage>max_page || max_page>10) ?<VscChevronRight onClick={upPageList}  className={styles.right_icon}/>:null}\r\n          </div>\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n  \r\n  export default Home;\r\n  "]},"metadata":{},"sourceType":"module"}