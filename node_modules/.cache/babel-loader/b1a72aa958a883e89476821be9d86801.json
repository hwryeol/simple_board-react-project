{"ast":null,"code":"import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useState}from\"react\";import{Navigate}from'react-router-dom';import styles from\"./PostCreate.module.css\";import{CKEditor}from'@ckeditor/ckeditor5-react';import Editor from'ckeditor5/build/ckeditor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(_ref){var isLogined=_ref.isLogined;var titleRef=useRef(null);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),insertId=_useState2[0],setInsertID=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),contents=_useState4[0],setContents=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRedirectPost=_useState6[0],setIsRedirectPost=_useState6[1];function sendPost(){if(!titleRef.current.value){alert(\"타이틀을 입력하세요\");}else if(!contents){alert(\"내용을 입력하세요\");}else{fetch(\"/forums\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({title:titleRef.current.value,contents:contents})}).then(function(res){if(res.status===401){alert(\"로그인이 필요합니다\");}res.json().then(function(data){setInsertID(data.insertId);setIsRedirectPost(function(prev){return!prev;});});});}}return/*#__PURE__*/_jsxs(\"div\",{className:styles.createPost,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.title,placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",ref:titleRef}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(CKEditor,{style:{height:\"500px\"},editor:Editor,data:\"\",onReady:function onReady(editor){// You can store the \"editor\" and use when it is needed.\nconsole.log('Editor is ready to use!',editor);},onChange:function onChange(event,editor){var data=editor.getData();setContents(data);console.log(contents);},onBlur:function onBlur(event,editor){console.log('Blur.',editor);},onFocus:function onFocus(event,editor){console.log('Focus.',editor);}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendPost,children:\"\\uB4F1\\uB85D\"}),isRedirectPost&&/*#__PURE__*/_jsx(Navigate,{to:\"/forums/\".concat(insertId)})]});}export default CreatePost;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/src/PostCreate.js"],"names":["useRef","useState","Navigate","styles","CKEditor","Editor","CreatePost","isLogined","titleRef","insertId","setInsertID","contents","setContents","isRedirectPost","setIsRedirectPost","sendPost","current","value","alert","fetch","method","headers","body","JSON","stringify","title","then","res","status","json","data","prev","createPost","height","editor","console","log","event","getData"],"mappings":"8HAAA,OAASA,MAAT,CAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,QAAT,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,C,wFAGA,QAASC,CAAAA,UAAT,MAAgC,IAAXC,CAAAA,SAAW,MAAXA,SAAW,CAC5B,GAAMC,CAAAA,QAAQ,CAAGR,MAAM,CAAC,IAAD,CAAvB,CAEA,cAA6BC,QAAQ,CAAC,CAAD,CAArC,wCAAKQ,QAAL,eAAcC,WAAd,eACA,eAA+BT,QAAQ,CAAC,EAAD,CAAvC,yCAAOU,QAAP,eAAgBC,WAAhB,eACA,eAA2CX,QAAQ,CAAC,KAAD,CAAnD,yCAAOY,cAAP,eAAsBC,iBAAtB,eAEA,QAASC,CAAAA,QAAT,EAAmB,CACf,GAAG,CAACP,QAAQ,CAACQ,OAAT,CAAiBC,KAArB,CAA2B,CACvBC,KAAK,CAAC,YAAD,CAAL,CACH,CAFD,IAEM,IAAG,CAACP,QAAJ,CAAa,CACfO,KAAK,CAAC,WAAD,CAAL,CACH,CAFK,IAED,CACDC,KAAK,WAAW,CACZC,MAAM,CAAC,MADK,CAEZC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CAFI,CAKZC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBC,KAAK,CAACjB,QAAQ,CAACQ,OAAT,CAAiBC,KADP,CAEhBN,QAAQ,CAACA,QAFO,CAAf,CALO,CAAX,CAAL,CASGe,IATH,CASQ,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAG,CAACC,MAAJ,GAAe,GAAlB,CAAsB,CAClBV,KAAK,CAAC,YAAD,CAAL,CACH,CACDS,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,SAAAI,IAAI,CAAE,CAClBpB,WAAW,CAACoB,IAAI,CAACrB,QAAN,CAAX,CACAK,iBAAiB,CAAC,SAAAiB,IAAI,QAAI,CAACA,IAAL,EAAL,CAAjB,CACH,CAHD,EAIH,CAjBD,EAkBH,CAEJ,CACD,mBAAO,aAAK,SAAS,CAAE5B,MAAM,CAAC6B,UAAvB,wBACH,cAAO,SAAS,CAAE7B,MAAM,CAACsB,KAAzB,CAAgC,WAAW,CAAC,mDAA5C,CAAwD,GAAG,CAAEjB,QAA7D,EADG,cAEH,aAFG,cAGH,KAAC,QAAD,EACY,KAAK,CAAE,CAACyB,MAAM,CAAC,OAAR,CADnB,CAEY,MAAM,CAAG5B,MAFrB,CAGY,IAAI,CAAC,EAHjB,CAIY,OAAO,CAAG,iBAAA6B,MAAM,CAAI,CAChB;AACAC,OAAO,CAACC,GAAR,CAAa,yBAAb,CAAwCF,MAAxC,EACH,CAPb,CAQY,QAAQ,CAAG,kBAAEG,KAAF,CAASH,MAAT,CAAqB,CAC5B,GAAMJ,CAAAA,IAAI,CAAGI,MAAM,CAACI,OAAP,EAAb,CACA1B,WAAW,CAACkB,IAAD,CAAX,CACAK,OAAO,CAACC,GAAR,CAAYzB,QAAZ,EACH,CAZb,CAaY,MAAM,CAAG,gBAAE0B,KAAF,CAASH,MAAT,CAAqB,CAC1BC,OAAO,CAACC,GAAR,CAAa,OAAb,CAAsBF,MAAtB,EACH,CAfb,CAgBY,OAAO,CAAG,iBAAEG,KAAF,CAASH,MAAT,CAAqB,CAC3BC,OAAO,CAACC,GAAR,CAAa,QAAb,CAAuBF,MAAvB,EACH,CAlBb,EAHG,cAuBH,eAAQ,OAAO,CAAEnB,QAAjB,0BAvBG,CAwBFF,cAAc,eAAE,KAAC,QAAD,EAAU,EAAE,mBAAaJ,QAAb,CAAZ,EAxBd,GAAP,CA0BH,CAED,cAAeH,CAAAA,UAAf","sourcesContent":["import { useRef,useState } from \"react\"\r\nimport { Navigate } from 'react-router-dom'\r\nimport styles from \"./PostCreate.module.css\"\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport Editor from 'ckeditor5/build/ckeditor';\r\n\r\n\r\nfunction CreatePost({isLogined}){\r\n    const titleRef = useRef(null);\r\n\r\n    let [insertId,setInsertID] = useState(0);\r\n    const [contents,setContents] = useState(\"\");\r\n    const [isRedirectPost,setIsRedirectPost] = useState(false);\r\n    \r\n    function sendPost(){\r\n        if(!titleRef.current.value){\r\n            alert(\"타이틀을 입력하세요\")\r\n        }else if(!contents){\r\n            alert(\"내용을 입력하세요\")\r\n        }else{\r\n            fetch(`/forums`,{\r\n                method:\"POST\",\r\n                headers:{\r\n                    \"Content-Type\": \"application/json\"\r\n                  },\r\n                body:JSON.stringify({\r\n                    title:titleRef.current.value,\r\n                    contents:contents\r\n                })\r\n            }).then(res=>{\r\n                if(res.status === 401){\r\n                    alert(\"로그인이 필요합니다\")\r\n                }\r\n                res.json().then(data=>{\r\n                    setInsertID(data.insertId);\r\n                    setIsRedirectPost(prev => !prev);\r\n                })\r\n            })\r\n        }\r\n       \r\n    }\r\n    return <div className={styles.createPost}>\r\n        <input className={styles.title} placeholder=\"제목을 입력하세요\" ref={titleRef}></input>\r\n        <hr></hr>\r\n        <CKEditor\r\n                    style={{height:\"500px\"}}\r\n                    editor={ Editor }\r\n                    data=\"\"\r\n                    onReady={ editor => {\r\n                        // You can store the \"editor\" and use when it is needed.\r\n                        console.log( 'Editor is ready to use!', editor );\r\n                    } }\r\n                    onChange={ ( event, editor ) => {\r\n                        const data = editor.getData();\r\n                        setContents(data);\r\n                        console.log(contents);\r\n                    } }\r\n                    onBlur={ ( event, editor ) => {\r\n                        console.log( 'Blur.', editor );\r\n                    } }\r\n                    onFocus={ ( event, editor ) => {\r\n                        console.log( 'Focus.', editor );\r\n                    } }\r\n                />\r\n        <button onClick={sendPost}>등록</button>\r\n        {isRedirectPost&&<Navigate to={`/forums/${insertId}`}/>}\r\n    </div>\r\n}\r\n\r\nexport default CreatePost;"]},"metadata":{},"sourceType":"module"}