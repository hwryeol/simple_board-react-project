{"ast":null,"code":"import _defineProperty from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,Navigate}from\"react-router-dom\";import{useState,useRef,useEffect}from\"react\";import styles from\"./Login.module.css\";import sha256 from\"sha256\";import googleLoginBtn from\"./asset/googleLogin.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var setIsLogined=_ref.setIsLogined,getUserData=_ref.getUserData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRedirect=_useState2[0],setIsRedirect=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var el=useRef();useEffect(function(){getUserData();},[]);function onClickSubmit(event){event.preventDefault();fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:userData===null||userData===void 0?void 0:userData.id,password:sha256(userData===null||userData===void 0?void 0:userData.password)})}).then(function(response){if(response.status===401){alert(\"아이디 또는 비밀번호가 틀렸습니다.\");}else{getUserData();setIsLogined(true);}});setIsRedirect(true);}function onChangeUserData(event){setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));}var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isToolTip=_useState6[0],setIsToolTip=_useState6[1];useEffect(function(){window.addEventListener(\"mouseover\",function(e){if(el.current.contains(e.target))setIsToolTip(true);},{once:true});window.addEventListener(\"mouseout\",function(e){if(el.current.contains(e.target))setIsToolTip(false);},{once:true});},[isToolTip]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.form,children:[\"\\uB85C\\uADF8\\uC778\",/*#__PURE__*/_jsx(\"input\",{className:styles.id,name:\"id\",type:\"text\",onChange:onChangeUserData}),/*#__PURE__*/_jsx(\"input\",{className:styles.password,name:\"password\",type:\"password\",onChange:onChangeUserData}),/*#__PURE__*/_jsx(\"input\",{className:styles.submit,type:\"button\",onClick:onClickSubmit,value:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\\uC744 \\uC544\\uC9C1 \\uC548\\uD558\\uC168\\uB098\\uC694?\"}),/*#__PURE__*/_jsx(\"a\",{ref:el,href:\"/auth/google\",onClick:function onClick(){return getUserData();},children:/*#__PURE__*/_jsx(\"div\",{children:\"\\uAD6C\\uAE00\\uB85C\\uADF8\\uC778\"})}),/*#__PURE__*/_jsx(\"div\",{style:isToolTip?styles.tooltip:styles.hidden,children:\"\\uD234\\uD301\"})]}),isRedirect&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"})]});}export default Login;","map":{"version":3,"sources":["C:/Users/mehr0/Documents/Dev/simpleforum/hwryeol_simpleforum/src/Login.js"],"names":["Link","Navigate","useState","useRef","useEffect","styles","sha256","googleLoginBtn","Login","setIsLogined","getUserData","isRedirect","setIsRedirect","userData","setUserData","el","onClickSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","id","password","then","response","status","alert","onChangeUserData","target","name","value","isToolTip","setIsToolTip","window","addEventListener","e","current","contains","once","form","submit","tooltip","hidden"],"mappings":"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","sourcesContent":["import {Link,Navigate} from \"react-router-dom\"\r\nimport {useState,useRef,useEffect} from \"react\"\r\nimport styles from \"./Login.module.css\";\r\nimport sha256 from \"sha256\";\r\nimport googleLoginBtn from \"./asset/googleLogin.png\"\r\n\r\n\r\nfunction Login({setIsLogined,getUserData}) {\r\n  const [isRedirect,setIsRedirect] = useState(false);\r\n  const [userData,setUserData] = useState([]);\r\n  const el = useRef();\r\n\r\n  useEffect(()=>{\r\n    getUserData();\r\n  },[])\r\n\r\n  function onClickSubmit(event){\r\n    event.preventDefault();\r\n    fetch(`/login`,{\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-Type\":\"application/json\",\r\n      },\r\n      body:JSON.stringify({\r\n        id:userData?.id,\r\n        password:sha256(userData?.password)\r\n      }),\r\n    }).then((response) =>{\r\n      if(response.status === 401){\r\n        alert(\"아이디 또는 비밀번호가 틀렸습니다.\");\r\n      }\r\n      else{\r\n        getUserData();\r\n        setIsLogined(true);\r\n      }\r\n    });\r\n    setIsRedirect(true);\r\n  }\r\n  function onChangeUserData(event){\r\n    setUserData({\r\n        ...userData,\r\n        [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  const [isToolTip,setIsToolTip] = useState(false);\r\n  useEffect(()=>{\r\n    window.addEventListener(\"mouseover\",(e)=>{\r\n      if(el.current.contains(e.target))setIsToolTip(true);\r\n    },{once:true})\r\n    window.addEventListener(\"mouseout\",(e)=>{\r\n      if(el.current.contains(e.target))setIsToolTip(false);\r\n    },{once:true})\r\n  },[isToolTip])\r\n\r\n  return (\r\n    <div>\r\n      <div className={styles.form}>\r\n        로그인\r\n        <input className={styles.id} name=\"id\" type=\"text\" onChange={onChangeUserData}/>\r\n        <input className={styles.password} name=\"password\" type=\"password\" onChange={onChangeUserData}/>\r\n        <input className={styles.submit} type=\"button\" onClick={onClickSubmit} value=\"로그인\" />\r\n        <Link to=\"/signup\">회원가입을 아직 안하셨나요?</Link>\r\n        <a ref={el} href=\"/auth/google\" onClick={()=>getUserData()}>\r\n          <div>구글로그인</div>\r\n          </a>\r\n        <div style={isToolTip?styles.tooltip:styles.hidden}>툴팁</div>\r\n      </div>\r\n        \r\n        {isRedirect&&<Navigate to=\"/\"/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}